<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title text=center>Cadastro de Animal</ion-title>
  </ion-toolbar>
</ion-header>


<ion-content>
<ion-card>
   
    <ion-input hidden [(ngModel)]="id"></ion-input>
    <ion-input hidden [(ngModel)]="produtorid"></ion-input>
    <ion-input hidden [(ngModel)]="fazendaid"></ion-input>
    <ion-input hidden [(ngModel)]="categoriaid"></ion-input>
    <ion-input hidden [(ngModel)]="racaid"></ion-input>

    <ion-item>
        <ion-label position="floating">Produtor</ion-label>
        <ion-select (blur)="onBlur(getFazendas(produtorid))"  [(ngModel)]="produtorid" okText="Ok" cancelText="Voltar">
         <ion-select-option *ngFor="let produtor of produtores" value={{produtor.id}}>{{produtor.nomeProdutor}}</ion-select-option>
        </ion-select> 
      </ion-item>
  
      <ion-item>
          <ion-label position="floating">Fazenda</ion-label>
          <ion-select [(ngModel)]="fazendaid" okText="Ok" cancelText="Voltar">
           <ion-select-option *ngFor="let fazenda of fazendas" value={{fazenda.id}}>{{fazenda.nomeFazenda}}</ion-select-option>
          </ion-select> 
        </ion-item>
      
        <ion-item>
            <ion-label position="floating">N. Animal</ion-label>
            <ion-input [(ngModel)]="numeroAnimal"></ion-input>
       </ion-item> 

       <ion-item>
        <ion-label position="floating">Data Nasc</ion-label>
        <ion-datetime displayformat="dd/MM/yyyy" name="datanasc" min="2019" max="2030-01-01" [(ngModel)]="datanasc"></ion-datetime>
      </ion-item>
    
        <ion-item>
            <ion-label position="floating">Categoria</ion-label>
            <ion-select [(ngModel)]="categoriaid" okText="Ok" cancelText="Voltar">
             <ion-select-option *ngFor="let categoria of categorias" value={{categoria.id}}>{{categoria.nome}}</ion-select-option>
            </ion-select> 
          </ion-item>   

        <ion-item>
            <ion-label position="floating">Raça</ion-label>
            <ion-select  [(ngModel)]="racaid" okText="Ok" cancelText="Voltar">
             <ion-select-option *ngFor="let raca of racas" value={{raca.id}}>{{raca.nome}}</ion-select-option>
            </ion-select> 
         </ion-item>

        <ion-item>
          <ion-label>Ativo</ion-label>
          <ion-checkbox readonly="true" [(ngModel)]="ativo"></ion-checkbox>
        </ion-item> 
      
    <ion-button expand="full" (click)="save()"> Salvar </ion-button>
    <ion-button expand="full" (click)="clearfields()"> Limpar Campos </ion-button>
    
    <ion-list>
    
    <ion-list-header>
       <ion-label> 
            Listagem
       </ion-label>
    </ion-list-header>
    
    <ion-item-sliding *ngFor="let item of animais">
     <ion-item>
         <ion-label text-wrap>
             <h3> Produtor : {{ item.produtor.nomeProdutor }} -  Fazenda : {{ item.fazenda.nomeFazenda }}</h3>
             <h3> N. Animal      : {{ item.numeroAnimal}} -  Categoria : {{ item.categoria.nome }}</h3>
             <h3> Raça           : {{ item.raca.nome }}</h3>
             <h3> Ativo          : {{ item.ativo }}</h3>                    
         </ion-label>
     </ion-item>    
     <ion-item-options side="end">
          <ion-item-option color="secondary" (click)="update(item)">Alterar</ion-item-option>
          <ion-item-option color="danger" (click)="delete(item)">Excluir</ion-item-option>         
     </ion-item-options>
    </ion-item-sliding>
    </ion-list>
  </ion-card>
    </ion-content>
    